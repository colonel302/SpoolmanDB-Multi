<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Filament-Datenbank</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Ein Repository mit den neuesten Filament- und Materialdaten für den 3D-Druck.">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Filament- und Materialdaten für den 3D-Druck</h1>
    <p>
        Dieses Projekt ist Open-Source, Sie können gerne einen Pull-Request erstellen auf Github wenn Sie Daten hinzufügen oder ändern möchten.
    </p>

    <script>
    // Sprache aus URL-Parameter oder Browser ermitteln
    const urlParams = new URLSearchParams(window.location.search);
    let lang = urlParams.get('lang') || navigator.language.split('-')[0].toLowerCase() || 'en';

    // Unterstützte Sprachen (ggf. aus Wörterbuch oder statisch)
    const supportedLangs = ['de', 'fr', 'es', 'it']; // Passe bei Bedarf an

    // Standard-Dateinamen
    let filamentFile = 'filaments.json';
    let materialsFile = 'materials.json';

    // Für unterstützte Sprachen != Englisch die Sprachdateien wählen
    if (lang !== 'en' && supportedLangs.includes(lang)) {
        filamentFile = `filaments_${lang}.json`;
        materialsFile = `materials_${lang}.json`;
    }

    // Funktion zum Laden einer JSON-Datei mit Fallback auf Englisch
    function fetchWithFallback(file, fallbackFile) {
        return fetch(file)
            .then(resp => {
                if (!resp.ok) throw new Error('not found');
                return resp.json();
            })
            .catch(() => {
                if (file !== fallbackFile) {
                    return fetch(fallbackFile).then(r => r.json());
                }
            });
    }

    // Lade Filamentdaten
    fetchWithFallback(filamentFile, 'filaments.json').then(data => {
        console.log("Geladene Filamentdaten:", data);
        // Hier deine Verarbeitung
    });

    // Lade Materialdaten
    fetchWithFallback(materialsFile, 'materials.json').then(data => {
        console.log("Geladene Materialdaten:", data);
        // Hier deine Verarbeitung
    });
    </script>
</body>
</html>
